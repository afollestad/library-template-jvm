apply plugin: 'java-library'
apply plugin: 'kotlin'
apply from: '../dependencies.gradle'
apply from: "../sourcesets.gradle"

ext.artifactId = "librarytemplate-jvm"
apply from: "../bintrayconfig.gradle"

afterEvaluate {
  if (modulePackageId != null && modulePackageId != '') {
    tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
      kotlinOptions {
        freeCompilerArgs += ['-module-name', modulePackageId]
        jvmTarget = '1.8'
      }
    }
  } else {
    logger.warn('Skipping setting compiler module name, no package to use.')
  }
}

dependencies {
  api "org.jetbrains.kotlin:kotlin-stdlib-jdk8:${versions.kotlin}"
  api "org.jetbrains.kotlinx:kotlinx-coroutines-core:${versions.coroutines}"

  testImplementation "junit:junit:${versions.junit}"
  testImplementation "org.mockito:mockito-core:${versions.mockito}"
  testImplementation "com.nhaarman.mockitokotlin2:mockito-kotlin:${versions.mockitoKotlin}"
  testImplementation "com.google.truth:truth:${versions.truth}"
}

apply from: "../spotless.gradle"
