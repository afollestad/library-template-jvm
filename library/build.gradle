apply plugin: "java-library"
apply plugin: "kotlin"
apply from: "../dependencies.gradle"
apply from: "../sourcesets.gradle"

ext.artifactId = "librarytemplate-jvm"
apply from: "../bintrayconfig.gradle"

afterEvaluate {
  tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions {
      if (modulePackageId != null && modulePackageId != '') {
        freeCompilerArgs += ['-module-name', modulePackageId]
      } else {
        logger.warn('Skipping setting compiler module name, no package to use.')
      }
      jvmTarget = '1.8'
    }
  }
}

dependencies {
  api deps.kotlin.coroutines.core
  implementation deps.kotlin.stdlib8

  testImplementation deps.kotlin.test.mockito
  testImplementation deps.test.junit
  testImplementation deps.test.mockito
  testImplementation deps.test.truth
}

apply from: "../spotless.gradle"
